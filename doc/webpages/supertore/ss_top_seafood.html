<!DOCTYPE html>
<html>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta http-equiv='Cache-Control' content='no-cache, no-store, must-revalidate'>
    <meta http-equiv='Pragma' content='no-cache'>
    <meta http-equiv='Expires' content='0'>
    <title>Discounted Items - ss_seafood</title>
    <link rel='preconnect' href='https://fonts.googleapis.com'>
    <link rel='preconnect' href='https://fonts.gstatic.com' crossorigin>
    <link href='https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap' rel='stylesheet'>
    <script src='https://cdn.jsdelivr.net/npm/chart.js'></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', Arial, sans-serif;
            background-color: #fff;
            overflow-x: hidden;
        }

        .header-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #fff;
            padding: 10px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .item-container {
            display: flex;
            gap: 15px;
            width: 90%;
            max-width: 600px;
            margin: 10px auto;
            padding-bottom: 10px;
            border-bottom: 1px solid #ccc;
        }

        .left-side {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .chart-view {
            width: 100% !important;
            height: 200px !important;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .no-data {
            text-align: center;
            margin-top: 30px;
            color: #666;
        }

        /* Add other existing styles from original file here */
    </style>
</head>
<body>
    <div class="header-container">
        <div class="header-row">
            <button class="search-button" onclick="showSearchBar()">
                <span class="search-icon">üîç</span> FIND ‚ûú
            </button>
            <div class="page-title">ss_seafood</div>
        </div>
        <div class="creation-time">Created on: 2025-02-28 17:09:52</div>
    </div>
    <hr class="divider">
    <div class="header-spacer"></div>

    
        <div class="item-container" data-product-id="20720065_KG">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/20720065/b3/en/beauty/20720065_beauty_a06_@2.png' alt='Fresh Atlantic Salmon Fillets, Skin On, Packaged, Club Size' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="20720065_KG">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-20720065_KG" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-20720065_KG">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#1</span>
            <span class="first-word">Fresh</span>
            <span class="product-name-text">Atlantic Salmon Fillets, Skin On, Packaged, Club Size</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 29.79</span></div>
        <div class="now-price">NOW: $ 20.47</div>
        <div class="discount-badge">31.3% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-20720065_KG"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="20852143_KG">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/20852143/b3/en/angle/20852143_angle_a06_@2.png' alt='Fresh Atlantic Salmon Fillets, Skin On, Packaged' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="20852143_KG">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-20852143_KG" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-20852143_KG">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#2</span>
            <span class="first-word">Fresh</span>
            <span class="product-name-text">Atlantic Salmon Fillets, Skin On, Packaged</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 11.95</span></div>
        <div class="now-price">NOW: $ 8.79</div>
        <div class="discount-badge">26.4% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-20852143_KG"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="21043887_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/21043887/b3/en/angle/21043887_angle_a06_@2.png' alt='Pacific White Shrimp Raw 16-20/LB' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="21043887_EA">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-21043887_EA" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-21043887_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#3</span>
            <span class="first-word">Pacific</span>
            <span class="product-name-text">White Shrimp Raw 16-20/LB</span>
        </div>
        <div>Expire On: 2025-03-12</div>
        <div>WAS: <span class="was-price">$ 9.49</span></div>
        <div class="now-price">NOW: $ 7.00</div>
        <div class="discount-badge">26.2% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-21043887_EA"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="21211819_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/21211819/b3/en/front/21211819_front_a06_@2.png' alt='Wild Yellowfin Tuna Skinless Boneless Steaks, Sustainably Sourced 280g' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="21211819_EA">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-21211819_EA" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-21211819_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#4</span>
            <span class="first-word">Wild</span>
            <span class="product-name-text">Yellowfin Tuna Skinless Boneless Steaks, Sustainably Sourced 280g</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 13.49</span></div>
        <div class="now-price">NOW: $ 9.99</div>
        <div class="discount-badge">25.9% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-21211819_EA"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="20750012_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/20750012/b3/en/angle/20750012_angle_a06_@2.png' alt='Crab Flavoured Wild Alaska Pollock Chunks' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="20750012_EA">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-20750012_EA" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-20750012_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#5</span>
            <span class="first-word">Crab</span>
            <span class="product-name-text">Flavoured Wild Alaska Pollock Chunks</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 3.99</span></div>
        <div class="now-price">NOW: $ 2.99</div>
        <div class="discount-badge">25.1% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-20750012_EA"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="20749901_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/20749901/b3/en/front/20749901_front_a06_@2.png' alt='Lobster Flavoured Wild Alaska Pollock Chunks' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="20749901_EA">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-20749901_EA" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-20749901_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#6</span>
            <span class="first-word">Lobster</span>
            <span class="product-name-text">Flavoured Wild Alaska Pollock Chunks</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 3.99</span></div>
        <div class="now-price">NOW: $ 2.99</div>
        <div class="discount-badge">25.1% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-20749901_EA"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="20749798_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/20749798/b3/en/angle/20749798_angle_a06_@2.png' alt='Leg-Style Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="20749798_EA">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-20749798_EA" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-20749798_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#7</span>
            <span class="first-word">Leg-Style</span>
            <span class="product-name-text">Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 3.99</span></div>
        <div class="now-price">NOW: $ 2.99</div>
        <div class="discount-badge">25.1% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-20749798_EA"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="20699832_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/20699832/b3/en/angle/20699832_angle_a06_@2.png' alt='Flake-Style Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="20699832_EA">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-20699832_EA" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-20699832_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#8</span>
            <span class="first-word">Flake-Style</span>
            <span class="product-name-text">Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 3.99</span></div>
        <div class="now-price">NOW: $ 2.99</div>
        <div class="discount-badge">25.1% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-20699832_EA"></canvas>
            </div>
        </div>
        
        </div>
        
        <div class="item-container" data-product-id="21108887_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src='https://assets.shop.loblaws.ca/products/21108887/b3/en/angle/21108887_angle_a06_@2.png' alt='Breaded Cod Bites With Sauce' />
            </div>
            <button class="vertical-switch-button selected fade-on-load" 
                    data-type="detail" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled" data-product-id="21108887_EA">
                <input type="checkbox" 
                       class="toggle-input" 
                       id="toggle-21108887_EA" 
                       onchange="toggleMonYr(this)">
                <label class="toggle-label" for="toggle-21108887_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            
        <div class="right-side">
            <div class="view-container">
                <div class="detail-view">
                    
        <div class="item-name">
            <span class="item-number">#9</span>
            <span class="first-word">Breaded</span>
            <span class="product-name-text">Cod Bites With Sauce</span>
        </div>
        <div>Expire On: 2025-03-05</div>
        <div>WAS: <span class="was-price">$ 10.99</span></div>
        <div class="now-price">NOW: $ 9.99</div>
        <div class="discount-badge">9.1% OFF</div>
        
                </div>
                <canvas class="chart-view" id="chart-21108887_EA"></canvas>
            </div>
        </div>
        
        </div>
        

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.body.classList.add('page-loaded');
            window.priceHistoryData = {"20720065_KG": {"1mon": [{"date": "02.19", "was_price": 29.79, "now_price": 20.47}, {"date": "03.05", "was_price": 29.79, "now_price": 20.47}], "1yr": [{"date": "02.19", "was_price": 29.79, "now_price": 20.47}, {"date": "03.05", "was_price": 29.79, "now_price": 20.47}]}, "20852143_KG": {"1mon": [{"date": "02.19", "was_price": 11.95, "now_price": 8.79}, {"date": "03.05", "was_price": 11.95, "now_price": 8.79}], "1yr": [{"date": "02.19", "was_price": 11.95, "now_price": 8.79}, {"date": "03.05", "was_price": 11.95, "now_price": 8.79}]}, "21043887_EA": {"1mon": [{"date": "02.05", "was_price": 9.49, "now_price": 5.99}, {"date": "03.12", "was_price": 9.49, "now_price": 7.0}], "1yr": [{"date": "02.05", "was_price": 9.49, "now_price": 5.99}, {"date": "03.12", "was_price": 9.49, "now_price": 7.0}]}, "21211819_EA": {"1mon": [{"date": "02.05", "was_price": 13.49, "now_price": 9.99}, {"date": "03.05", "was_price": 13.49, "now_price": 9.99}], "1yr": [{"date": "02.05", "was_price": 13.49, "now_price": 9.99}, {"date": "03.05", "was_price": 13.49, "now_price": 9.99}]}, "20750012_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "20749901_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "20749798_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "20699832_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "21108887_EA": {"1mon": [{"date": "02.05", "was_price": 10.99, "now_price": 9.99}, {"date": "03.05", "was_price": 10.99, "now_price": 9.99}], "1yr": [{"date": "02.05", "was_price": 10.99, "now_price": 9.99}, {"date": "03.05", "was_price": 10.99, "now_price": 9.99}]}};
            window.chartInstances = {};
        });

        function switchToDetail(btn) {
            const container = btn.closest('.item-container');
            container.querySelectorAll('.vertical-switch-button').forEach(b => {
                b.classList.remove('selected');
                btn.classList.add('selected');
            });

            const toggleSwitch = container.querySelector('.toggle-switch');
            toggleSwitch.classList.add('disabled');
            toggleSwitch.querySelector('.toggle-input').checked = false;
            toggleSwitch.querySelector('.toggle-text').textContent = "1 Yr";

            const productId = container.dataset.productId;
            const chartCanvas = container.querySelector('.chart-view');
            chartCanvas.style.opacity = '0';

            if (window.chartInstances[productId]) {
                window.chartInstances[productId].destroy();
                delete window.chartInstances[productId];
            }
        }

        function toggleMonYr(checkbox) {
            const container = checkbox.closest('.item-container');
            const productId = container.dataset.productId;
            const chartCanvas = container.querySelector('.chart-view');
            const isYearView = checkbox.checked;

            // Clear existing chart
            if (window.chartInstances[productId]) {
                window.chartInstances[productId].destroy();
            }

            // Get filtered data
            const dataType = isYearView ? '1yr' : '1mon';
            const data = window.priceHistoryData[productId][dataType]
                .filter(d => d.was_price > 0 && d.now_price > 0)
                .sort((a, b) => a.date.localeCompare(b.date));

            if (data.length === 0) {
                chartCanvas.parentNode.innerHTML = '<div class="no-data">No price data available</div>';
                return;
            }

            // Create new chart
            const ctx = chartCanvas.getContext('2d');
            chartCanvas.style.opacity = '1';

            window.chartInstances[productId] = new Chart(ctx, {
                type: isYearView ? 'line' : 'bar',
                data: {
                    labels: data.map(d => d.date),
                    datasets: [
                        {
                            label: 'Was Price',
                            data: data.map(d => d.was_price),
                            backgroundColor: isYearView ? 'rgba(0, 119, 204, 0.1)' : 'rgba(255, 153, 0, 0.5)',
                            borderColor: '#0077cc',
                            borderWidth: 2,
                            tension: 0.4,
                            stack: 'combined'
                        },
                        {
                            label: 'Now Price',
                            data: data.map(d => d.now_price),
                            backgroundColor: isYearView ? 'rgba(0, 153, 0, 0.1)' : 'rgba(0, 153, 0, 0.5)',
                            borderColor: '#009900',
                            borderWidth: 2,
                            tension: 0.4,
                            stack: 'combined'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            stacked: !isYearView,
                            ticks: { autoSkip: true, maxRotation: 0 }
                        },
                        y: {
                            stacked: !isYearView,
                            beginAtZero: false,
                            ticks: {
                                callback: value => '$' + value.toFixed(2)
                            }
                        }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: ctx => `${ctx.dataset.label}: $${ctx.parsed.y.toFixed(2)}`
                            }
                        }
                    }
                }
            });
        }

        // Add existing search functionality from original file here
    </script>
</body>
</html>
    