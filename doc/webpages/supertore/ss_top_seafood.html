<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>Discounted Items - ss_seafood</title>
<link href='https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap' rel='stylesheet'>
<script src='https://cdn.jsdelivr.net/npm/chart.js'></script>

<style>
body {
    margin: 0;
    padding: 20px;
    font-family: 'Montserrat', sans-serif;
    background: #f5f6fa;
}

.header-container {
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}

.item-container {
    display: flex;
    gap: 20px;
    background: white;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.left-side {
    flex: 0 0 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.item-image img {
    width: 120px;
    height: 120px;
    object-fit: contain;
    border-radius: 8px;
    border: 1px solid #eee;
}

.vertical-switch-button {
    background: #27ae60;
    color: white;
    border: none;
    padding: 10px;
    width: 100%;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.vertical-switch-button.selected {
    background: #27ae60;
}

.toggle-switch {
    position: relative;
    width: 80px;
    height: 30px;
    background: #ecf0f1;
    border-radius: 15px;
}

.toggle-switch input { display: none; }

.toggle-circle {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 24px;
    height: 24px;
    background: white;
    border-radius: 50%;
    transition: all 0.3s;
}

.toggle-text {
    position: absolute;
    right: 8px;
    top: 6px;
    font-size: 12px;
    color: #7f8c8d;
}

input:checked + .toggle-circle {
    transform: translateX(50px);
}

.right-side {
    flex: 1;
    min-width: 0;
}

.item-name {
    font-size: 18px;
    margin-bottom: 8px;
}

.first-word {
    font-weight: 700;
    color: #2c3e50;
}

.product-name-text {
    color: #7f8c8d;
    font-weight: 400;
}

.was-price {
    color: #95a5a6;
    text-decoration: line-through;
    margin-right: 10px;
}

.now-price {
    color: #e74c3c;
    font-size: 24px;
    font-weight: 700;
    margin: 10px 0;
}

.discount-badge {
    background: #f1c40f;
    color: #2c3e50;
    padding: 6px 12px;
    border-radius: 4px;
    font-weight: 700;
    display: inline-block;
}

.chart-view {
    width: 100%;
    height: 200px;
    margin-top: 15px;
}

.creation-time {
    color: #95a5a6;
    font-size: 12px;
    text-align: center;
    margin-top: 10px;
}
</style>
</head>

<body>
<div class="header-container">
    <div class="header-row">
        <button class="search-button" onclick="showSearchBar()">üîç Search</button>
        <div class="page-title">ss_seafood</div>
    </div>
    <div class="creation-time">Generated: 2025-02-28 17:20:02</div>
</div>


        <div class="item-container" data-product-id="20720065_KG">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/20720065/b3/en/beauty/20720065_beauty_a06_@2.png" alt="Fresh Atlantic Salmon Fillets, Skin On, Packaged, Club Size" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-20720065_KG" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-20720065_KG">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#1</span>
                <span class="first-word">Fresh</span>
                <span class="product-name-text">Atlantic Salmon Fillets, Skin On, Packaged, Club Size</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 29.79</span>
                <span class="now-price">NOW: $ 20.47</span>
            </div>
            <div class="discount-badge">31.3% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-20720065_KG"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="20852143_KG">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/20852143/b3/en/angle/20852143_angle_a06_@2.png" alt="Fresh Atlantic Salmon Fillets, Skin On, Packaged" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-20852143_KG" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-20852143_KG">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#2</span>
                <span class="first-word">Fresh</span>
                <span class="product-name-text">Atlantic Salmon Fillets, Skin On, Packaged</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 11.95</span>
                <span class="now-price">NOW: $ 8.79</span>
            </div>
            <div class="discount-badge">26.4% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-20852143_KG"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="21043887_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/21043887/b3/en/angle/21043887_angle_a06_@2.png" alt="Pacific White Shrimp Raw 16-20/LB" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-21043887_EA" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-21043887_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#3</span>
                <span class="first-word">Pacific</span>
                <span class="product-name-text">White Shrimp Raw 16-20/LB</span>
            </div>
            <div class="expiry">Expire On: 2025-03-12</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 9.49</span>
                <span class="now-price">NOW: $ 7.00</span>
            </div>
            <div class="discount-badge">26.2% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-21043887_EA"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="21211819_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/21211819/b3/en/front/21211819_front_a06_@2.png" alt="Wild Yellowfin Tuna Skinless Boneless Steaks, Sustainably Sourced 280g" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-21211819_EA" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-21211819_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#4</span>
                <span class="first-word">Wild</span>
                <span class="product-name-text">Yellowfin Tuna Skinless Boneless Steaks, Sustainably Sourced 280g</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 13.49</span>
                <span class="now-price">NOW: $ 9.99</span>
            </div>
            <div class="discount-badge">25.9% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-21211819_EA"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="20750012_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/20750012/b3/en/angle/20750012_angle_a06_@2.png" alt="Crab Flavoured Wild Alaska Pollock Chunks" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-20750012_EA" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-20750012_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#5</span>
                <span class="first-word">Crab</span>
                <span class="product-name-text">Flavoured Wild Alaska Pollock Chunks</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 3.99</span>
                <span class="now-price">NOW: $ 2.99</span>
            </div>
            <div class="discount-badge">25.1% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-20750012_EA"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="20749901_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/20749901/b3/en/front/20749901_front_a06_@2.png" alt="Lobster Flavoured Wild Alaska Pollock Chunks" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-20749901_EA" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-20749901_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#6</span>
                <span class="first-word">Lobster</span>
                <span class="product-name-text">Flavoured Wild Alaska Pollock Chunks</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 3.99</span>
                <span class="now-price">NOW: $ 2.99</span>
            </div>
            <div class="discount-badge">25.1% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-20749901_EA"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="20749798_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/20749798/b3/en/angle/20749798_angle_a06_@2.png" alt="Leg-Style Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-20749798_EA" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-20749798_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#7</span>
                <span class="first-word">Leg-Style</span>
                <span class="product-name-text">Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 3.99</span>
                <span class="now-price">NOW: $ 2.99</span>
            </div>
            <div class="discount-badge">25.1% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-20749798_EA"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="20699832_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/20699832/b3/en/angle/20699832_angle_a06_@2.png" alt="Flake-Style Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-20699832_EA" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-20699832_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#8</span>
                <span class="first-word">Flake-Style</span>
                <span class="product-name-text">Crab Flavoured Wild Alaska Pollock and Wild Pacific Whiting</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 3.99</span>
                <span class="now-price">NOW: $ 2.99</span>
            </div>
            <div class="discount-badge">25.1% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-20699832_EA"></canvas>
                </div>
            </div>
        </div>
        
        <div class="item-container" data-product-id="21108887_EA">
            
        <div class="left-side">
            <div class="item-image">
                <img src="https://assets.shop.loblaws.ca/products/21108887/b3/en/angle/21108887_angle_a06_@2.png" alt="Breaded Cod Bites With Sauce" />
            </div>
            <button class="vertical-switch-button selected" 
                    onclick="switchToDetail(this)">
                On Sale
            </button>
            <div class="toggle-switch disabled">
                <input type="checkbox" 
                       id="toggle-21108887_EA" 
                       onchange="toggleMonYr(this)">
                <label for="toggle-21108887_EA">
                    <span class="toggle-circle"></span>
                    <span class="toggle-text">1 Yr</span>
                </label>
            </div>
        </div>
        
            <div class="right-side">
                <div class="view-container">
                    
        <div class="detail-view">
            <div class="item-name">
                <span class="item-number">#9</span>
                <span class="first-word">Breaded</span>
                <span class="product-name-text">Cod Bites With Sauce</span>
            </div>
            <div class="expiry">Expire On: 2025-03-05</div>
            <div class="pricing">
                <span class="was-price">WAS: $ 10.99</span>
                <span class="now-price">NOW: $ 9.99</span>
            </div>
            <div class="discount-badge">9.1% OFF</div>
        </div>
        
                    <canvas class="chart-view" id="chart-21108887_EA"></canvas>
                </div>
            </div>
        </div>
        

<script>
document.addEventListener('DOMContentLoaded', () => {
    window.priceHistoryData = {"20720065_KG": {"1mon": [{"date": "02.19", "was_price": 29.79, "now_price": 20.47}, {"date": "03.05", "was_price": 29.79, "now_price": 20.47}], "1yr": [{"date": "02.19", "was_price": 29.79, "now_price": 20.47}, {"date": "03.05", "was_price": 29.79, "now_price": 20.47}]}, "20852143_KG": {"1mon": [{"date": "02.19", "was_price": 11.95, "now_price": 8.79}, {"date": "03.05", "was_price": 11.95, "now_price": 8.79}], "1yr": [{"date": "02.19", "was_price": 11.95, "now_price": 8.79}, {"date": "03.05", "was_price": 11.95, "now_price": 8.79}]}, "21043887_EA": {"1mon": [{"date": "02.05", "was_price": 9.49, "now_price": 5.99}, {"date": "03.12", "was_price": 9.49, "now_price": 7.0}], "1yr": [{"date": "02.05", "was_price": 9.49, "now_price": 5.99}, {"date": "03.12", "was_price": 9.49, "now_price": 7.0}]}, "21211819_EA": {"1mon": [{"date": "02.05", "was_price": 13.49, "now_price": 9.99}, {"date": "03.05", "was_price": 13.49, "now_price": 9.99}], "1yr": [{"date": "02.05", "was_price": 13.49, "now_price": 9.99}, {"date": "03.05", "was_price": 13.49, "now_price": 9.99}]}, "20750012_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "20749901_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "20749798_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "20699832_EA": {"1mon": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}], "1yr": [{"date": "02.12", "was_price": 3.99, "now_price": 2.99}, {"date": "03.05", "was_price": 3.99, "now_price": 2.99}]}, "21108887_EA": {"1mon": [{"date": "02.05", "was_price": 10.99, "now_price": 9.99}, {"date": "03.05", "was_price": 10.99, "now_price": 9.99}], "1yr": [{"date": "02.05", "was_price": 10.99, "now_price": 9.99}, {"date": "03.05", "was_price": 10.99, "now_price": 9.99}]}};
    window.chartInstances = {};
});

function switchToDetail(btn) {
    const container = btn.closest('.item-container');
    container.querySelectorAll('.vertical-switch-button').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');

    const chartCanvas = container.querySelector('.chart-view');
    chartCanvas.style.opacity = '0';
    const productId = container.dataset.productId;

    if(window.chartInstances[productId]) {
        window.chartInstances[productId].destroy();
        delete window.chartInstances[productId];
    }
};

function toggleMonYr(checkbox) {
    const container = checkbox.closest('.item-container');
    const productId = container.dataset.productId;
    const chartCanvas = container.querySelector('.chart-view');
    const isYearView = checkbox.checked;

    if(window.chartInstances[productId]) {
        window.chartInstances[productId].destroy();
    }

    const data = window.priceHistoryData[productId][isYearView ? '1yr' : '1mon']
        .filter(d => d.was_price > 0 && d.now_price > 0)
        .sort((a, b) => a.date.localeCompare(b.date));

    if(data.length === 0) {
        chartCanvas.innerHTML = '<div class="no-data">No price data available</div>';
        return;
    }

    const ctx = chartCanvas.getContext('2d');
    chartCanvas.style.opacity = '1';

    window.chartInstances[productId] = new Chart(ctx, {
        type: isYearView ? 'line' : 'bar',
        data: {
            labels: data.map(d => d.date),
            datasets: [
                {
                    label: 'Was Price',
                    data: data.map(d => d.was_price),
                    backgroundColor: isYearView ? 'rgba(52, 152, 219, 0.1)' : 'rgba(241, 196, 15, 0.3)',
                    borderColor: '#3498db',
                    borderWidth: 2,
                    tension: 0.4
                },
                {
                    label: 'Now Price',
                    data: data.map(d => d.now_price),
                    backgroundColor: isYearView ? 'rgba(46, 204, 113, 0.1)' : 'rgba(46, 204, 113, 0.3)',
                    borderColor: '#2ecc71',
                    borderWidth: 2,
                    tension: 0.4
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'top' },
                tooltip: {
                    callbacks: {
                        label: ctx => `${ctx.dataset.label}: $${ctx.parsed.y.toFixed(2)}`
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: false,
                    ticks: {
                        callback: value => `$${value.toFixed(2)}`
                    }
                }
            }
        }
    });
}
</script>
</body>
</html>
